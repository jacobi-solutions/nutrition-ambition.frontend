<div class="food-selection-container">

  <!-- Food options inline layout -->
  <div *ngIf="hasPayload" class="food-options-inline">
    <div *ngFor="let phrase of payloadKeys" class="food-item-row">
      
      <!-- Food name and brand -->
      <div class="food-name">
        <label for="foodSelect-{{ phrase }}"><strong>{{ phrase }}</strong></label>
        <ion-select 
          interface="popover"
          [value]="getSelectedFood(phrase)?.fatSecretFoodId" 
          (ionChange)="onFoodSelected(phrase, $event.detail.value)" 
          id="foodSelect-{{ phrase }}">
          <ion-select-option 
            *ngFor="let food of (foodOptions?.[phrase] || [])" 
            [value]="food.fatSecretFoodId">
            {{ food.displayName }}
            <span *ngIf="food.brandName"> â€“ {{ food.brandName }}</span>
          </ion-select-option>
        </ion-select>
      </div>

      <!-- Inline radio buttons for serving options -->
      <div class="serving-options-inline">
        <ion-radio-group 
          [value]="getSelectedServingId(phrase)"
          (ionChange)="onServingSelected(phrase, $event.detail.value)">
          
          <ion-radio 
            *ngFor="let serving of getSelectedFood(phrase)?.servings"
            [value]="serving.fatSecretServingId">
            {{ serving.description }}
            <span *ngIf="serving.quantity && serving.unit">
              ({{ serving.quantity }} {{ serving.unit }})
            </span>
          </ion-radio>
        </ion-radio-group>
      </div>

    </div>
  </div>

  <!-- Confirm button -->
  <div class="confirm-section">
    <ion-button 
      expand="block" 
      [disabled]="!isSelectionComplete()"
      (click)="confirmSelections()"
      color="primary">
      Confirm Selection
    </ion-button>
  </div>

</div>
