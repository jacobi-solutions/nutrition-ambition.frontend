<ion-grid *ngIf="hasData">
  <ion-row>
    <!-- Electrolytes Variable-Radius Pie Chart -->
    <ion-col size="12">
      <div class="chart-wrapper">
        <div class="electrolytes-chart-container">
          <span class="animation-label targets-label">Targets</span>
          <span class="animation-label actual-label">Actual</span>

          <div class="electrolytes-chart">
            <svg viewBox="0 0 100 100">
              <!-- Target rings (thin outer rings at 100%) -->
              <g class="target-rings">
                <circle *ngFor="let electrolyte of electrolytes"
                        class="target-ring"
                        [attr.class]="'target-ring ' + electrolyte.key + '-target'"
                        cx="50" cy="50"
                        [attr.r]="targetRingRadius"
                        [attr.stroke]="electrolyte.color"
                        [attr.stroke-dasharray]="electrolyte.targetStrokeDasharray"
                        [attr.stroke-dashoffset]="electrolyte.targetStrokeDashoffset"
                        [attr.transform]="'rotate(-90 50 50)'">
                </circle>
              </g>

              <!-- Actual consumption segments (variable radius) -->
              <g class="actual-segments">
                <path *ngFor="let electrolyte of electrolytes"
                      class="segment"
                      [attr.class]="'segment ' + electrolyte.key + '-segment'"
                      [attr.d]="electrolyte.segmentPath"
                      [attr.fill]="electrolyte.color">
                </path>
              </g>

              <!-- Percentage labels -->
              <g class="percentage-labels">
                <text *ngFor="let electrolyte of electrolytes"
                      class="percentage-label"
                      [attr.x]="electrolyte.labelX"
                      [attr.y]="electrolyte.labelY"
                      text-anchor="middle"
                      dominant-baseline="middle">
                  {{ electrolyte.percentage }}%
                </text>
              </g>
            </svg>
          </div>

          <div class="chart-tip">
            Make each slice of the pie grow at the same rate. Try to stop when you hit the outer ring!
          </div>
        </div>

        <!-- Legend -->
        <div class="chart-values">
          <div class="value-item" *ngFor="let electrolyte of electrolytes">
            <span class="value-dot" [style.background-color]="electrolyte.color"></span>
            <span class="value-label">{{ electrolyte.name }}:</span>
            <span class="value-number">{{ electrolyte.consumed }}mg / {{ electrolyte.target }}mg</span>
          </div>
        </div>
      </div>
    </ion-col>
  </ion-row>
</ion-grid>

<!-- Empty state -->
<div class="empty-state" *ngIf="!hasData">
  <span>No electrolyte data available</span>
</div>
